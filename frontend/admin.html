<!doctype html><html lang="en"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><title>Admin - G Mart</title><link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"></head><body class="bg-gray-50 text-gray-800"><header class="bg-green-700 text-white p-4"><div class="container mx-auto"><a href="/index.html">Home</a></div></header><main class="container mx-auto py-8"><h2 class="text-2xl font-bold mb-4">Admin Panel</h2><div class="bg-white p-4 rounded shadow"><h3 class="font-semibold">Add Product</h3><input id="pname" placeholder="Name" class="w-full p-2 mb-2"/><input id="pprice" placeholder="Price (USD cents)" class="w-full p-2 mb-2"/><textarea id="pdesc" placeholder="Description" class="w-full p-2 mb-2"></textarea><button onclick="addProduct()" class="bg-green-700 text-white px-4 py-2 rounded">Add</button></div><div class="mt-6" id="list"></div><h3 class="mt-8">Orders</h3><div id="orders"></div></main><script>async function load(){const res=await fetch('/api/products');const data=await res.json();const list=document.getElementById('list');list.innerHTML='';data.forEach(p=>{const div=document.createElement('div');div.className='bg-white p-3 rounded shadow mb-2';div.innerHTML=`<div class='flex justify-between'><div><b>${p.name}</b><div class='text-sm'>$${(p.price/100).toFixed(2)}</div></div><div><button onclick='del("${p._id}")' class='text-red-600'>Delete</button></div></div>`;list.appendChild(div)});loadOrders();}async function loadOrders(){const token=localStorage.getItem('token');const res=await fetch('/api/orders',{headers:{'Authorization':'Bearer '+token}});if(res.ok){const data=await res.json();const node=document.getElementById('orders');node.innerHTML='';data.forEach(o=>{const d=document.createElement('div');d.className='bg-white p-3 rounded shadow mb-2';d.innerHTML=`<div><b>Order ${o._id}</b> - ${o.payment_status} - <a href='/api/invoice/${o._id}' target='_blank'>Invoice</a></div>`;node.appendChild(d)});} }async function addProduct(){const name=document.getElementById('pname').value;const price=Number(document.getElementById('pprice').value);const description=document.getElementById('pdesc').value;const token=localStorage.getItem('token');const res=await fetch('/api/products',{method:'POST',headers:{'Content-Type':'application/json','Authorization':'Bearer '+token},body:JSON.stringify({name,price,description})});if(res.ok){alert('Added');load();}else alert('Error');}async function del(id){const token=localStorage.getItem('token');await fetch('/api/products/'+id,{method:'DELETE',headers:{'Authorization':'Bearer '+token}});load();}load();</script></body></html>